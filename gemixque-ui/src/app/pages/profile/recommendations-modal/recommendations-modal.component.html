<div class="modal-header">
  <h4 class="modal-title">Recommendations</h4>
  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="activeModal.dismiss('Cross click')"
  ></button>
</div>
<div class="modal-body h-100">
  <div *ngIf="isLoading" class="d-flex justify-content-center h-100">
    <app-spinner [ngClass]="'mx-auto'"></app-spinner>
  </div>
  <div class="selection-container" *ngIf="!isLoading && recommendations">
    <div class="form-check">
      <input
        [formControl]="isTableViewControl"
        class="form-check-input"
        type="radio"
        [value]="true"
        name="flexRadioDefault"
        id="flexRadioDefault1"
        checked
      />
      <label class="form-check-label" for="flexRadioDefault1"> Table </label>
    </div>
    <div class="form-check">
      <input
        [formControl]="isTableViewControl"
        class="form-check-input"
        type="radio"
        [value]="false"
        name="flexRadioDefault"
        id="flexRadioDefault2"
      />
      <label class="form-check-label" for="flexRadioDefault2"> Chart </label>
    </div>
  </div>

  <div
    class="table-container"
    *ngIf="!isLoading && recommendations && isTableView"
  >
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Game</th>
          <th scope="col">Value</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let recommendation of recommendationsOnPage">
          <td>
            <a [routerLink]="['/games', recommendation.uuid]">{{
              recommendation.title
            }}</a>
          </td>
          <td>{{ recommendation.value | number: "1.1-2" }}</td>
        </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-between p-2">
      <ngb-pagination
        [collectionSize]="recommendations.length"
        [(page)]="page"
        [pageSize]="pageSize"
        (pageChange)="refreshRecommendations()"
      >
      </ngb-pagination>
    </div>
  </div>

  <div
    class="graph-container"
    style="display: block"
    *ngIf="!isLoading && recommendations && !isTableView"
  >
    <canvas
      baseChart
      [data]="barChartData"
      [options]="barChartOptions"
      [plugins]="barChartPlugins"
      [type]="barChartType"
    >
    </canvas>
  </div>
</div>
<div class="modal-footer">
  <ng-icon
    class="mb-2"
    name="IconoirInfoEmpty"
    size="20"
    placement="top"
    ngbTooltip="Precision of results. For better results, set a higher number. K should be between 1 and 50."
  ></ng-icon>
  <label>k:</label>

  <input [formControl]="k" type="number" value="" min="0" max="50" step="1" />
  <button
    type="submit"
    [disabled]="!k.valid"
    class="btn btn-primary"
    (click)="getRecommendations()"
  >
    Get recommendations
  </button>
  <button
    type="button"
    class="btn btn-outline-dark"
    (click)="activeModal.close('Close click')"
  >
    Close
  </button>
</div>
